!function(e,t,n,r){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof i.parcelRequire&&i.parcelRequire,a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(n,r){if(!t[n]){if(!e[n]){var i="function"==typeof parcelRequire&&parcelRequire;if(!r&&i)return i(n,!0);if(o)return o(n,!0);if(a&&"string"==typeof n)return a(n);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}d.resolve=function(t){return e[n][1][t]||t},d.cache={};var c=t[n]=new l.Module(n);e[n][0].call(c.exports,d,c,c.exports,this)}return t[n].exports;function d(e){return l(d.resolve(e))}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=t,l.parent=o,l.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},i.parcelRequire=l;for(var u=0;u<n.length;u++)l(n[u]);if(n.length){var c=l(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd&&define((function(){return c}))}}({c1ef48618f4890b4bcb8edd280494b41:[function(e,t,n){var r,i,o,a;window.SuperGif=(r=function(e){return e.reduce((function(e,t){return 2*e+t}),0)},i=function(e){for(var t=[],n=7;n>=0;n--)t.push(!!(e&1<<n));return t},o=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},a=function(e,t){t||(t={});var n=function(t){for(var n=[],r=0;r<t;r++)n.push(e.readBytes(3));return n},o=function(){var t,n;n="";do{t=e.readByte(),n+=e.read(t)}while(0!==t);return n},a=function(a){a.leftPos=e.readUnsigned(),a.topPos=e.readUnsigned(),a.width=e.readUnsigned(),a.height=e.readUnsigned();var l=i(e.readByte());a.lctFlag=l.shift(),a.interlaced=l.shift(),a.sorted=l.shift(),a.reserved=l.splice(0,2),a.lctSize=r(l.splice(0,3)),a.lctFlag&&(a.lct=n(1<<a.lctSize+1)),a.lzwMinCodeSize=e.readByte();var u=o();a.pixels=function(e,t){for(var n,r,i=0,o=function(e){for(var n=0,r=0;r<e;r++)t.charCodeAt(i>>3)&1<<(7&i)&&(n|=1<<r),i++;return n},a=[],l=1<<e,u=l+1,c=e+1,d=[],s=function(){d=[],c=e+1;for(var t=0;t<l;t++)d[t]=[t];d[l]=[],d[u]=null};;)if(r=n,(n=o(c))!==l){if(n===u)break;if(n<d.length)r!==l&&d.push(d[r].concat(d[n][0]));else{if(n!==d.length)throw new Error("Invalid LZW code.");d.push(d[r].concat(d[r][0]))}a.push.apply(a,d[n]),d.length===1<<c&&c<12&&c++}else s();return a}(a.lzwMinCodeSize,u),a.interlaced&&(a.pixels=function(e,t){for(var n=new Array(e.length),r=e.length/t,i=function(r,i){var o=e.slice(i*t,(i+1)*t);n.splice.apply(n,[r*t,t].concat(o))},o=[0,4,2,1],a=[8,8,4,2],l=0,u=0;u<4;u++)for(var c=o[u];c<r;c+=a[u])i(c,l),l++;return n}(a.pixels,a.width)),t.img&&t.img(a)},l=function(){var n={};switch(n.sentinel=e.readByte(),String.fromCharCode(n.sentinel)){case"!":n.type="ext",function(n){switch(n.label=e.readByte(),n.label){case 249:n.extType="gce",function(n){e.readByte();var o=i(e.readByte());n.reserved=o.splice(0,3),n.disposalMethod=r(o.splice(0,3)),n.userInput=o.shift(),n.transparencyGiven=o.shift(),n.delayTime=e.readUnsigned(),n.transparencyIndex=e.readByte(),n.terminator=e.readByte(),t.gce&&t.gce(n)}(n);break;case 254:n.extType="com",function(e){e.comment=o(),t.com&&t.com(e)}(n);break;case 1:n.extType="pte",function(n){e.readByte(),n.ptHeader=e.readBytes(12),n.ptData=o(),t.pte&&t.pte(n)}(n);break;case 255:n.extType="app",function(n){switch(e.readByte(),n.identifier=e.read(8),n.authCode=e.read(3),n.identifier){case"NETSCAPE":!function(n){e.readByte(),n.unknown=e.readByte(),n.iterations=e.readUnsigned(),n.terminator=e.readByte(),t.app&&t.app.NETSCAPE&&t.app.NETSCAPE(n)}(n);break;default:!function(e){e.appData=o(),t.app&&t.app[e.identifier]&&t.app[e.identifier](e)}(n)}}(n);break;default:n.extType="unknown",function(e){e.data=o(),t.unknown&&t.unknown(e)}(n)}}(n);break;case",":n.type="img",a(n);break;case";":n.type="eof",t.eof&&t.eof(n);break;default:throw new Error("Unknown block: 0x"+n.sentinel.toString(16))}"eof"!==n.type&&setTimeout(l,0)};!function(){var o={};if(o.sig=e.read(3),o.ver=e.read(3),"GIF"!==o.sig)throw new Error("Not a GIF file.");o.width=e.readUnsigned(),o.height=e.readUnsigned();var a=i(e.readByte());o.gctFlag=a.shift(),o.colorRes=r(a.splice(0,3)),o.sorted=a.shift(),o.gctSize=r(a.splice(0,3)),o.bgColor=e.readByte(),o.pixelAspectRatio=e.readByte(),o.gctFlag&&(o.gct=n(1<<o.gctSize+1)),t.hdr&&t.hdr(o)}(),setTimeout(l,0)},function(e){var t,n,r={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var i in e)r[i]=e[i];r.vp_w&&r.vp_h&&(r.is_vp=!0);var l=null,u=!1,c=null,d=null,s=null,h=null,f=null,p=null,g=null,y=!0,_=!1,w=[],v=[],m=r.gif;void 0===r.auto_play&&(r.auto_play=!m.getAttribute("rel:auto_play")||"1"==m.getAttribute("rel:auto_play"));var b,x,T,B,C=r.hasOwnProperty("on_end")?r.on_end:null,P=r.hasOwnProperty("loop_delay")?r.loop_delay:0,k=r.hasOwnProperty("loop_mode")?r.loop_mode:"auto",E=!r.hasOwnProperty("draw_while_loading")||r.draw_while_loading,S=!!E&&(!r.hasOwnProperty("show_progress_bar")||r.show_progress_bar),A=r.hasOwnProperty("progressbar_height")?r.progressbar_height:25,R=r.hasOwnProperty("progressbar_background_color")?r.progressbar_background_color:"rgba(255,255,255,0.4)",I=r.hasOwnProperty("progressbar_foreground_color")?r.progressbar_foreground_color:"rgba(255,0,22,.8)",U=function(){c=null,d=null,f=s,s=null,p=null},O=function(){try{a(t,W)}catch(e){N("parse")}},q=function(e,t){b.width=e*L(),b.height=t*L(),T.style.minWidth=e*L()+"px",B.width=e,B.height=t,B.style.width=e+"px",B.style.height=t+"px",B.getContext("2d").setTransform(1,0,0,1,0,0)},M=function(e,t,n){if(n&&S){var i,o,a,l=A;r.is_vp?_?(o=(r.vp_t+r.vp_h-l)/L(),l/=L(),i=r.vp_l/L()+e/t*(r.vp_w/L()),a=b.width/L()):(o=r.vp_t+r.vp_h-l,l=l,i=r.vp_l+e/t*r.vp_w,a=b.width):(o=(b.height-l)/(_?L():1),i=e/t*b.width/(_?L():1),a=b.width/(_?L():1),l/=_?L():1),x.fillStyle=R,x.fillRect(i,o,a-i,l),x.fillStyle=I,x.fillRect(0,o,i,l)}},N=function(e){l=e,n={width:m.width,height:m.height},w=[],x.fillStyle="black",x.fillRect(0,0,r.c_w?r.c_w:n.width,r.c_h?r.c_h:n.height),x.strokeStyle="red",x.lineWidth=3,x.moveTo(0,0),x.lineTo(r.c_w?r.c_w:n.width,r.c_h?r.c_h:n.height),x.moveTo(0,r.c_h?r.c_h:n.height),x.lineTo(r.c_w?r.c_w:n.width,0),x.stroke()},D=function(){p&&(w.push({data:p.getImageData(0,0,n.width,n.height),delay:d}),v.push({x:0,y:0}))},z=function(){var e,t,n,i=-1,o=0,a=function(e){i+=e,c()},u=(e=!1,t=function(){null!==C&&C(m),o++,!1!==k||o<0?n():(e=!1,y=!1)},n=function(){if(e=y){a(1);var r=10*w[i].delay;r||(r=100),0==(i+1+w.length)%w.length?(r+=P,setTimeout(t,r)):setTimeout(n,r)}},function(){e||setTimeout(n,0)}),c=function(){var e;(i=parseInt(i,10))>w.length-1&&(i=0),i<0&&(i=0),e=v[i],B.getContext("2d").putImageData(w[i].data,e.x,e.y),x.globalCompositeOperation="copy",x.drawImage(B,0,0)};return{init:function(){l||(r.c_w&&r.c_h||x.scale(L(),L()),r.auto_play?u():(i=0,c()))},step:u,play:function(){y=!0,u()},pause:function(){y=!1},playing:y,move_relative:a,current_frame:function(){return i},length:function(){return w.length},move_to:function(e){i=e,c()}}}(),F=function(e){M(t.pos,t.data.length,e)},G=function(){},j=function(e,t){return function(n){e(n),F(t)}},W={hdr:j((function(e){q((n=e).width,n.height)})),gce:j((function(e){D(),U(),c=e.transparencyGiven?e.transparencyIndex:null,d=e.delayTime,s=e.disposalMethod})),com:j(G),app:{NETSCAPE:j(G)},img:j((function(e){p||(p=B.getContext("2d"));var t=w.length,i=e.lctFlag?e.lct:n.gct;t>0&&(3===f?null!==h?p.putImageData(w[h].data,0,0):p.clearRect(g.leftPos,g.topPos,g.width,g.height):h=t-1,2===f&&p.clearRect(g.leftPos,g.topPos,g.width,g.height));var o=p.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach((function(e,t){e!==c&&(o.data[4*t+0]=i[e][0],o.data[4*t+1]=i[e][1],o.data[4*t+2]=i[e][2],o.data[4*t+3]=255)})),p.putImageData(o,e.leftPos,e.topPos),_||(x.scale(L(),L()),_=!0),E&&(x.drawImage(B,0,0),E=r.auto_play),g=e}),!0),eof:function(e){D(),F(!1),r.c_w&&r.c_h||(b.width=n.width*L(),b.height=n.height*L()),z.init(),u=!1,X&&X(m)}},H=function(){var e=m.parentNode,t=document.createElement("div");b=document.createElement("canvas"),x=b.getContext("2d"),T=document.createElement("div"),B=document.createElement("canvas"),t.width=b.width=m.width,t.height=b.height=m.height,T.style.minWidth=m.width+"px",t.className="jsgif",T.className="jsgif_toolbar",t.appendChild(b),t.appendChild(T),e.insertBefore(t,m),e.removeChild(m),r.c_w&&r.c_h&&q(r.c_w,r.c_h),V=!0},L=function(){return r.max_width&&n&&n.width>r.max_width?r.max_width/n.width:1},V=!1,X=!1,Z=function(e){return!u&&(X=e||!1,u=!0,w=[],U(),h=null,f=null,p=null,g=null,!0)};return{play:z.play,pause:z.pause,move_relative:z.move_relative,move_to:z.move_to,get_playing:function(){return y},get_canvas:function(){return b},get_canvas_scale:function(){return L()},get_loading:function(){return u},get_auto_play:function(){return r.auto_play},get_length:function(){return z.length()},get_current_frame:function(){return z.current_frame()},load_url:function(e,n){if(Z(n)){var r=new XMLHttpRequest;r.open("GET",e,!0),"overrideMimeType"in r?r.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in r?r.responseType="arraybuffer":r.setRequestHeader("Accept-Charset","x-user-defined"),r.onloadstart=function(){V||H()},r.onload=function(e){200!=this.status&&N("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var n=this.response;n.toString().indexOf("ArrayBuffer")>0&&(n=new Uint8Array(n)),t=new o(n),setTimeout(O,0)},r.onprogress=function(e){e.lengthComputable&&M(e.loaded,e.total,!0)},r.onerror=function(){N("xhr")},r.send()}},load:function(e){this.load_url(m.getAttribute("rel:animated_src")||m.src,e)},load_raw:function(e,n){Z(n)&&(V||H(),t=new o(e),setTimeout(O,0))},set_frame_offset:function(e,t){v[e]?(void 0!==t.x&&(v[e].x=t.x),void 0!==t.y&&(v[e].y=t.y)):v[e]=t}}})},{}]},{},["c1ef48618f4890b4bcb8edd280494b41"]);
//# sourceMappingURL=libgif.cf7c450a.js.map
