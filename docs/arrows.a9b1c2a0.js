!function(){var t=parcelRequire("c684ee610d1b85369829f3b59d419d07");const e=(t,e)=>t+e;class n{constructor(t,e,n){if(isNaN(t)||isNaN(e)||isNaN(n||0))throw new Error("Point cannot have NaN");this.x=t,this.y=e,this.z=0}static averageOfPoints(t){const o=t.map(t=>t.x).reduce(e,0)/t.length,r=t.map(t=>t.y).reduce(e,0)/t.length,i=t.map(t=>t.z).reduce(e,0)/t.length;return new n(o,r,i)}toPoint(t){const e=t.x-this.x,n=t.y-this.y;return new o(Math.sqrt(e*e+n*n),Math.atan2(n,e))}add(t){return new n(this.x+t.r*Math.cos(t.theta),this.y+t.r*Math.sin(t.theta))}distance(t){return this.toPoint(t).length()}}class o{constructor(t,e){for(this.r=t;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;this.theta=e}length(){return this.r}angle(){return this.theta}unit(){return new o(1,this.theta)}static sumVectors(t){let e=0,n=0;for(const o of t)e+=o.r*Math.cos(o.theta),n+=o.r*Math.sin(o.theta);return new o(Math.sqrt(e*e+n*n),Math.atan2(n,e))}divide(t){return new o(this.r/t,this.theta)}multiply(t){return new o(this.r*t,this.theta)}limit(t){return this.r<t?this.clone():new o(t,this.theta)}clone(){return new o(this.r,this.theta)}}var r,i;(i=r||(r={}))[i.Point=1]="Point",i[i.Velocity=2]="Velocity",i[i.Acceleration=3]="Acceleration";let a=Math.PI/36;function l(t,e){const o=n.averageOfPoints(e.map(t=>t.p));return{type:r.Point,goal:o}}function s(t,e){let n=[];for(const o of e){let e=o.p.toPoint(t.p);const r=e.length();r>0&&r<25&&(e=e.unit().divide(r),n.push(e))}return 0===n.length?null:{type:r.Acceleration,goal:o.sumVectors(n).divide(n.length).unit().multiply(.05/1.5)}}function u(t,e){const n=o.sumVectors(e.map(t=>t.v)).divide(e.length);return{type:r.Velocity,goal:n}}const c=new n(400,400);function h(t){const e=c.distance(t.p);if(e>200){const n=(e-200)/(300-200),o=t.p.toPoint(c).unit().multiply(n).multiply(.05);return{type:r.Acceleration,goal:o}}return null}const p=3*Math.PI/4,d=2*Math.PI;function f(t){for(;t>Math.PI;)t-=d;for(;t<-Math.PI;)t+=d;return t}function m(t,e){if(null==e)return new o(0,0);let n;if(e.type===r.Point||e.type===r.Velocity){let i;e.type===r.Point?(i=t.p.toPoint(e.goal),i=i.unit().multiply(3)):(i=e.goal,i=i.limit(3)),n=o.sumVectors([i,t.v.multiply(-1)])}else n=e.goal;return n.limit(.05)}function g(t,e){const i=e.boids.filter(e=>t.id!==e.id).filter(e=>function(t,e){const n=t.p.toPoint(e.p);if(n.length()>50)return!1;const o=f(n.angle()-t.v.angle());return Math.abs(o)<p}(t,e));let a=[m(t,h(t)).multiply(2),m(t,s(t,e.boids)).multiply(3),m(t,{type:r.Acceleration,goal:new o(5e-4,t.v.theta)})];const c=new n(e.p5.mouseX,e.p5.mouseY);return c.x>0&&c.x<800&&c.y>0&&c.y<800&&a.push(m(t,function(t,e){if(t.x>0&&t.x<800&&t.y>0&&t.y<800){if(e.p.toPoint(t).length()<800/6)return{type:r.Point,goal:t}}return null}(c,t)).multiply(-2.4)),i.length>0&&(a=[...a,m(t,l(0,i)).multiply(.8),m(t,u(0,i))]),o.sumVectors(a)}function y(t){return{...t,boids:t.boids.map(e=>{const n=g(e,t);let r=o.sumVectors([e.v,n]).limit(3);r=function(t,e){let n=f(e.angle()-t.v.angle()),r=e.theta;return n>a?(r=f(t.v.angle()+a),new o(e.r,r)):n<-a?(r=f(t.v.angle()-a),new o(e.r,r)):e}(e,r);let i=e.p.add(r);return i=function(t){const e=c.toPoint(t);return e.length()>400?c.add(e.limit(400)):t}(i),{...e,p:i,v:r}})}}function v(t,e){const n=e.v.angle()-t.radians(90);t.push(),t.translate(e.p.x,e.p.y),t.rotate(n),t.beginShape(),t.vertex(0,9.375),t.vertex(4.6875,-9.375),t.vertex(-4.6875,-9.375),t.endShape(t.CLOSE),t.pop()}var P;new((P=t())&&P.__esModule?P.default:P)(t=>{let e;t.setup=()=>{e=function(t){t.createCanvas(800,800),t.frameRate(60),t.randomSeed(3);const e=[];for(let r=0;r<200;r++)e.push({id:r,p:new n(t.random(0,800),t.random(0,800)),v:new o(t.random(0,1),t.random(0,2*Math.PI))});return{boids:e,p5:void 0}}(t),e.p5=t},t.draw=()=>{e=y(e),function(t,e){t.background(255),t.fill(220),t.circle(400,400,Math.max(800,800)),t.fill(255,0,0),t.circle(t.mouseX,t.mouseY,4);const n=t.color(`hsb(${3*t.frameCount%360}, 100%, ${Math.floor(100)}%)`);t.fill(n),t.stroke(64);for(const n of e.boids)v(t,n)}(t,e)}},document.getElementById("p5canvas"))}();
//# sourceMappingURL=arrows.a9b1c2a0.js.map
