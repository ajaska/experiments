!function(e,t,o,n){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof r.parcelRequire&&r.parcelRequire,i="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function a(o,n){if(!t[o]){if(!e[o]){var r="function"==typeof parcelRequire&&parcelRequire;if(!n&&r)return r(o,!0);if(l)return l(o,!0);if(i&&"string"==typeof o)return i(o);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}d.resolve=function(t){return e[o][1][t]||t},d.cache={};var c=t[o]=new a.Module(o);e[o][0].call(c.exports,d,c,c.exports,this)}return t[o].exports;function d(e){return a(d.resolve(e))}}a.isParcelRequire=!0,a.Module=function(e){this.id=e,this.bundle=a,this.exports={}},a.modules=e,a.cache=t,a.parent=l,a.register=function(t,o){e[t]=[function(e,t){t.exports=o},{}]},r.parcelRequire=a;for(var u=0;u<o.length;u++)a(o[u]);if(o.length){var c=a(o[o.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd&&define((function(){return c}))}}({"64a4188525b343ea5e541751b8e22fbf":[function(e,t,o){!async function(){const e=document.getElementById("gif"),t=new window.SuperGif({gif:e});let o=!1,n=0;t.load(()=>{console.log("Frames: ",t.get_length()),n=t.get_length(),o=!0});const r=await async function(){return await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}();console.log(r);const l=new AudioContext({sampleRate:44100}),i=l.createMediaStreamSource(r),a=l.createScriptProcessor(1024,1,1);a.connect(l.destination),i.connect(a);const u=new WebSocket("ws://192.168.1.249:9001");let c=0;a.onaudioprocess=e=>{c>0?c-=1:function(e,t){e.send(String(Math.floor(performance.now()))),e.send(t.buffer)}(u,e.inputBuffer.getChannelData(0))},u.onerror=u.onclose=()=>{a.onaudioprocess=null};const d=document.getElementById("app"),s=document.getElementById("app2"),f=document.getElementById("bpm"),p=[document.getElementById("beat1"),document.getElementById("beat2"),document.getElementById("beat3"),document.getElementById("beat4")];let g=0,m=0;function y(e){return`hsl(240, 100%, ${Math.floor(100-e/2)}%)`}window.onclick=()=>{m=3};let b=0;u.onmessage=e=>{g+=1;let[r,l]=e.data.split("|");if(g%5==0){const e=Math.floor(performance.now())-Number(r);console.log("RTT",e),e>500&&(c=10),e<100&&(c=0)}const i=JSON.parse(l);if(i.b&&(m=(m+1)%4),i.b)p[m].style.backgroundColor=d.style.backgroundColor="#0000FF",b=0;else if(i.b2){const e=10*Math.max(Math.min(i.a,10),0);p[m].style.backgroundColor=d.style.backgroundColor=y(e)}else p[m].style.backgroundColor="#EAEAEA",d.style.backgroundColor="#FFFFFF";let a;b=Math.max(b,i.a),p[m].innerText=String(b),i.p>90&&(p[(m+1)%4].style.backgroundColor=y(i.p/2)),a=i.b&&m%2==0?0:Math.floor(i.p/100*n),o&&t.get_current_frame()!=a&&t.move_to(a),s.style.backgroundColor=`hsl(${Math.floor(240+90*m+90*i.p/100)%360}, 100%, 50%)`,f.innerText=i.t},d.style.width="400px",d.style.height="400px",d.style.backgroundColor="#FFFFFF",s.style.width="400px",s.style.height="100px",s.style.backgroundColor="#FFFFFF"}()},{}]},{},["64a4188525b343ea5e541751b8e22fbf"]);
//# sourceMappingURL=flashing.2b9e21eb.js.map
