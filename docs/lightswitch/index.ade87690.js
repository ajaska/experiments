!function(e,t,n,r,o){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof i.parcelRequire&&i.parcelRequire,u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function a(n,r){if(!t[n]){if(!e[n]){var o="function"==typeof parcelRequire&&parcelRequire;if(!r&&o)return o(n,!0);if(l)return l(n,!0);if(u&&"string"==typeof n)return u(n);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}c.resolve=function(t){return e[n][1][t]||t},c.cache={};var s=t[n]=new a.Module(n);e[n][0].call(s.exports,c,s,s.exports,this)}return t[n].exports;function c(e){return a(c.resolve(e))}}a.isParcelRequire=!0,a.Module=function(e){this.id=e,this.bundle=a,this.exports={}},a.modules=e,a.cache=t,a.parent=l,a.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},i.parcelRequire=a;for(var s=0;s<n.length;s++)a(n[s]);var c=a("6e0Qv");"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd&&define((function(){return c}))}({"5OU7e":[function(e,t,n){e("./bundle-manifest").register(JSON.parse('{"2liUH":"lightswitch/index.ade87690.js","24OWI":"switch.26ee81c4.mp3"}'))},{"./bundle-manifest":"6mAK0"}],"6mAK0":[function(e,t,n){"use strict";var r={};t.exports.register=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},t.exports.resolve=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}},{}],"6e0Qv":[function(e,t,n){"use strict";var r,o=a(e("react")),i=a(e("react-dom")),l=(r=e("classnames"))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}const s=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,c=e("url:./switch.mp3");s||new Audio(c);const f=()=>{const[e,t]=o.useState(!1),[n,r]=o.useState(null),[i,u]=o.useState(!1);o.useEffect(()=>{const e=new WebSocket("wss://experiments-do.ajaska.com:443/lightswitch/");return e.onmessage=e=>{const n=JSON.parse(e.data);t(n.on)},e.onerror=()=>{console.log("falling back to singleplayer mode"),r(null),u(!0)},r(e),()=>{e.close()}},[]),o.useEffect(()=>{(()=>{if(!s){const e=new Audio(c);e.volume=.2,e.play()}})()},[e]);const a=o.useCallback(e=>{t(e),null!=n&&n.send(JSON.stringify({on:e}))},[n]);return n||i?o.createElement("div",{className:(0,l.default)("container",{"lights-out":!e})},i?o.createElement("div",{style:{opacity:.6}},"(error connecting to server)"):null,o.createElement("div",{className:"switch-box"},o.createElement("div",{className:(0,l.default)("toggle-switch-holder",{off:e})},o.createElement("div",{className:"toggle-switch-top",onClick:()=>e?null:a(!0)}),o.createElement("div",{className:"toggle-switch-bottom",onClick:()=>e?a(!1):null})))):o.createElement("div",null,"Loading...")};i.render(o.createElement(f,null),document.getElementById("react"))},{react:"9iBJD","react-dom":"Ux6qv",classnames:"5KZJx","url:./switch.mp3":"43vrc"}],"5KZJx":[function(e,t,n){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)t.push(o);else if(Array.isArray(o)&&o.length){var l=n.apply(null,o);l&&t.push(l)}else if("object"===i)for(var u in o)e.call(o,u)&&o[u]&&t.push(u)}}return t.join(" ")}void 0!==t&&t.exports?(n.default=n,t.exports=n):window.classNames=n}()},{}],"43vrc":[function(e,t,n){t.exports=e("./bundle-url").getBundleURL()+e("./relative-path")("2liUH","24OWI")},{"./bundle-url":"2gS4w","./relative-path":"5LV3g"}],"2gS4w":[function(e,t,n){"use strict";var r=null;function o(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}n.getBundleURL=function(){return r||(r=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return o(e[0])}return"/"}()),r},n.getBaseURL=o,n.getOrigin=function(e){let t=(""+e).match(/(https?|file|ftp):\/\/[^/]+/);if(!t)throw new Error("Origin not found");return t[0]}},{}],"5LV3g":[function(e,t,n){"use strict";var r=e("./bundle-manifest").resolve;function o(e){if(""===e)return".";var t="/"===e[e.length-1]?e.slice(0,e.length-1):e,n=t.lastIndexOf("/");return-1===n?".":t.slice(0,n)}function i(e,t){if(e===t)return"";var n=e.split("/");"."===n[0]&&n.shift();var r,o,i=t.split("/");for("."===i[0]&&i.shift(),r=0;(r<i.length||r<n.length)&&null==o;r++)n[r]!==i[r]&&(o=r);var l=[];for(r=0;r<n.length-o;r++)l.push("..");return i.length>o&&l.push.apply(l,i.slice(o)),l.join("/")}t.exports=function(e,t){return i(o(r(e)),r(t))},t.exports._dirname=o,t.exports._relative=i},{"./bundle-manifest":"6mAK0"}]},{},["5OU7e","6e0Qv"]);
//# sourceMappingURL=index.ade87690.js.map
