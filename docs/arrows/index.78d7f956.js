!function(t,e,n,i,r){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof o.parcelRequire&&o.parcelRequire,a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function h(n,i){if(!e[n]){if(!t[n]){var r="function"==typeof parcelRequire&&parcelRequire;if(!i&&r)return r(n,!0);if(s)return s(n,!0);if(a&&"string"==typeof n)return a(n);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}l.resolve=function(e){return t[n][1][e]||e},l.cache={};var u=e[n]=new h.Module(n);t[n][0].call(u.exports,l,u,u.exports,this)}return e[n].exports;function l(t){return h(l.resolve(t))}}h.isParcelRequire=!0,h.Module=function(t){this.id=t,this.bundle=h,this.exports={}},h.modules=t,h.cache=e,h.parent=s,h.register=function(e,n){t[e]=[function(t,e){e.exports=n},{}]},o.parcelRequire=h;for(var u=0;u<n.length;u++)h(n[u]);var l=h("6EnQ2");"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd&&define((function(){return l}))}({"6EnQ2":[function(t,e,n){"use strict";var i,r=(i=t("p5"))&&i.__esModule?i:{default:i},o=t("./sketch");new r.default(t=>{let e;t.setup=()=>{e=(0,o.setup)(t),e.p5=t},t.draw=()=>{e=(0,o.updateState)(e),(0,o.draw)(t,e)}},document.getElementById("p5canvas"))},{p5:"62Beh","./sketch":"3Jsio"}],"3Jsio":[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setup=function(t){t.createCanvas(800,800),t.frameRate(60),t.randomSeed(3);const e=[];for(let n=0;n<200;n++)e.push({id:n,p:new s.Point(t.random(0,800),t.random(0,800)),v:new s.Vector(t.random(0,1),t.random(0,2*Math.PI))});return{boids:e,p5:void 0}},n.updateState=function(t){return{...t,boids:t.boids.map(e=>{const n=function(t,e){const n=e.boids.filter(e=>t.id!==e.id).filter(e=>function(t,e){const n=t.p.toPoint(e.p);if(n.length()>50)return!1;const i=y(n.angle()-t.v.angle());return Math.abs(i)<d}(t,e));let i=[m(t,f(t)).multiply(2),m(t,u(t,e.boids)).multiply(3),m(t,{type:r.Acceleration,goal:new s.Vector(5e-4,t.v.theta)})];const o=new s.Point(e.p5.mouseX,e.p5.mouseY);o.x>0&&o.x<800&&o.y>0&&o.y<800&&i.push(m(t,function(t,e){if(t.x>0&&t.x<800&&t.y>0&&t.y<800){if(e.p.toPoint(t).length()<800/6)return{type:r.Point,goal:t}}return null}(o,t)).multiply(-2.4));n.length>0&&(i=[...i,m(t,h(t,n)).multiply(.8),m(t,l(t,n))]);return s.Vector.sumVectors(i)}(e,t);let i=s.Vector.sumVectors([e.v,n]).limit(3);i=function(t,e){let n=y(e.angle()-t.v.angle()),i=e.theta;if(n>a)return i=y(t.v.angle()+a),new s.Vector(e.r,i);if(n<-a)return i=y(t.v.angle()-a),new s.Vector(e.r,i);return e}(e,i);let o=e.p.add(i);return o=function(t){const e=c.toPoint(t);if(e.length()>400)return c.add(e.limit(400));return t}(o),{...e,p:o,v:i}})}},n.draw=function(t,e){t.background(255),t.fill(220),t.circle(400,400,Math.max(800,800)),t.fill(255,0,0),t.circle(t.mouseX,t.mouseY,4);const n=t.color(`hsb(${3*t.frameCount%360}, 100%, ${Math.floor(100)}%)`);t.fill(n),t.stroke(64);for(const n of e.boids)g(t,n);return e};var i,r,o=(i=t("p5"))&&i.__esModule?i:{default:i},s=t("./Vector");o.default.disableFriendlyErrors=!0,function(t){t[t.Point=1]="Point",t[t.Velocity=2]="Velocity",t[t.Acceleration=3]="Acceleration"}(r||(r={}));let a=Math.PI/36;function h(t,e){const n=s.Point.averageOfPoints(e.map(t=>t.p));return{type:r.Point,goal:n}}function u(t,e){let n=[];for(const i of e){let e=i.p.toPoint(t.p);const r=e.length();r>0&&r<25&&(e=e.unit().divide(r),n.push(e))}return 0===n.length?null:{type:r.Acceleration,goal:s.Vector.sumVectors(n).divide(n.length).unit().multiply(.05/1.5)}}function l(t,e){const n=s.Vector.sumVectors(e.map(t=>t.v)).divide(e.length);return{type:r.Velocity,goal:n}}const c=new s.Point(400,400);function f(t){const e=c.distance(t.p);if(e>200){const n=(e-200)/(300-200),i=t.p.toPoint(c).unit().multiply(n).multiply(.05);return{type:r.Acceleration,goal:i}}return null}const d=3*Math.PI/4,p=2*Math.PI;function y(t){for(;t>Math.PI;)t-=p;for(;t<-Math.PI;)t+=p;return t}function m(t,e){if(null==e)return new s.Vector(0,0);let n;if(e.type===r.Point||e.type===r.Velocity){let i;e.type===r.Point?(i=t.p.toPoint(e.goal),i=i.unit().multiply(3)):(i=e.goal,i=i.limit(3)),n=s.Vector.sumVectors([i,t.v.multiply(-1)])}else n=e.goal;return n.limit(.05)}function g(t,e){const n=e.v.angle()-t.radians(90);t.push(),t.translate(e.p.x,e.p.y),t.rotate(n),t.beginShape(),t.vertex(0,9.375),t.vertex(4.6875,-9.375),t.vertex(-4.6875,-9.375),t.endShape(t.CLOSE),t.pop()}},{p5:"62Beh","./Vector":"7c2Aa"}],"7c2Aa":[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Vector2D=n.Vector=n.Point=void 0;const i=(t,e)=>t+e;class r{constructor(t,e,n){if(isNaN(t)||isNaN(e)||isNaN(n||0))throw new Error("Point cannot have NaN");this.x=t,this.y=e,this.z=0}static averageOfPoints(t){const e=t.map(t=>t.x).reduce(i,0)/t.length,n=t.map(t=>t.y).reduce(i,0)/t.length,o=t.map(t=>t.z).reduce(i,0)/t.length;return new r(e,n,o)}toPoint(t){const e=t.x-this.x,n=t.y-this.y;return new o(Math.sqrt(e*e+n*n),Math.atan2(n,e))}add(t){return new r(this.x+t.r*Math.cos(t.theta),this.y+t.r*Math.sin(t.theta))}distance(t){return this.toPoint(t).length()}}n.Point=r;class o{constructor(t,e){for(this.r=t;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;this.theta=e}length(){return this.r}angle(){return this.theta}unit(){return new o(1,this.theta)}static sumVectors(t){let e=0,n=0;for(const i of t)e+=i.r*Math.cos(i.theta),n+=i.r*Math.sin(i.theta);return new o(Math.sqrt(e*e+n*n),Math.atan2(n,e))}divide(t){return new o(this.r/t,this.theta)}multiply(t){return new o(this.r*t,this.theta)}limit(t){return this.r<t?this.clone():new o(t,this.theta)}clone(){return new o(this.r,this.theta)}}n.Vector=o;class s{constructor(t,e,n){if(isNaN(t)||isNaN(e)||isNaN(n||0))throw new Error("Vector2D cannot have NaN");this.x=t,this.y=e,this.z=0}negative(){return new s(-this.x,-this.y,-this.z)}add(t){return t instanceof s?new s(this.x+t.x,this.y+t.y,this.z+t.z):new s(this.x+t,this.y+t,this.z+t)}subtract(t){return t instanceof s?new s(this.x-t.x,this.y-t.y,this.z-t.z):new s(this.x-t,this.y-t,this.z-t)}multiply(t){return t instanceof s?new s(this.x*t.x,this.y*t.y,this.z*t.z):new s(this.x*t,this.y*t,this.z*t)}divide(t){return t instanceof s?new s(this.x/t.x,this.y/t.y,this.z/t.z):new s(this.x/t,this.y/t,this.z/t)}equals(t){return this.x==t.x&&this.y==t.y&&this.z==t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new s(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}length(){return this._length||(this._length=Math.sqrt(this.dot(this)))}unit(){return this._unit||(this._unit=this.divide(this.length()))}angle(){return this._angle||(this._angle=Math.atan2(this.y,this.x))}limit(t){return this.length()>t?this.unit().multiply(t):this.clone()}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}}angleTo(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}toArray(t){return[this.x,this.y,this.z].slice(0,t||3)}clone(){return new s(this.x,this.y,this.z)}static fromAngles(t,e){return new s(Math.cos(t)*Math.cos(e),Math.sin(e),Math.sin(t)*Math.cos(e))}static averageOfVector2Ds(t){const e=t.map(t=>t.x).reduce(i,0)/t.length,n=t.map(t=>t.y).reduce(i,0)/t.length,r=t.map(t=>t.z).reduce(i,0)/t.length;return new s(e,n,r)}}n.Vector2D=s},{}]},{},["6EnQ2"]);
//# sourceMappingURL=index.78d7f956.js.map
